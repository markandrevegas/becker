<template>
	<div
		class="hover:bg-accent flex cursor-pointer select-none items-center justify-center rounded-md transition-colors duration-200"
		@mouseenter="mouseEnterHandler"
		@mouseleave="mouseLeaveHandler"
		role="button"
		aria-label="Toggle Dark Mode"
		tabindex="0"
	>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			width="24"
			height="24"
			viewBox="0 0 24 24"
			fill="none"
			stroke="currentColor"
			stroke-width="2"
			stroke-linecap="round"
			stroke-linejoin="round"
		>
			<Motion is="path" ref="target" d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" transform-origin="12 12" />
		</svg>
	</div>
</template>

<script>
export default {
	name: "MoonIcon"
}
</script>

<script setup>
import { ref } from "vue"
import { MotionComponent as Motion, useMotion } from "@vueuse/motion"

const variants = {
	normal: {
		rotate: 0
	},
	animate: {
		rotate: [0, -10, 10, -5, 5, 0],
		transition: {
			duration: 1200,
			ease: "easeInOut"
		}
	}
}

const target = ref()
const targetInstance = useMotion(target, {
	initial: variants.normal,
	enter: variants.normal
})

const applyAnimation = (type) => {
	const variant = variants[type]
	targetInstance.apply(variant)
}

function mouseEnterHandler() {
	applyAnimation("animate")
}

function mouseLeaveHandler() {
	applyAnimation("normal")
}
</script>
